#!/usr/bin/env node
'use strict'

var program = require('commander')
var shell = require('shelljs')
var path = require('path')
var packageObj = require('../package')

program
  .version(packageObj.version + '/official ' + packageObj.weVersion  + '/nwjs ' + packageObj.nwjsVersion)
  .usage('[--debug [port]]')
  .description('启动微信web开发者工具')
  .option('-D, --debug [port]', '开启debug模式', /^[1-9]\d{1,3}$/)
  .parse(process.argv)

var execCommon = path.resolve(__dirname, '../dist/nw')
if (program.debug) {
  var port = program.debug === true
    ? 9222
    : program.debug

  execCommon += ' --remote-debugging-port=' + port
  console.info('remote-debugging-port@' + port)
}
shell.exec(execCommon)
