#!/usr/bin/env node
'use strict'

process.env.NODE_PATH = __dirname + '/../node_modules/'

var program = require('commander')
var shell = require('shelljs')
var path = require('path')
var packageObj = require('../package')

program
  .version(packageObj.version + '/official ' + packageObj.weVersion  + '/nwjs ' + packageObj.nwjsVersion)
  .usage('wxdt [--debug [port]]')
  .description('启动微信web开发者工具')
  .option('-D, --debug [port]', '开启debug模式', /^[1-9]\d{1,3}$/)
  .action(function (name, commond) {
    var execCommon = path.resolve(__dirname, '../dist/nw')
    if (commond.debug) {
      var port = commond.debug === true
        ? 9222
        : commond.debug

      execCommon += ' --remote-debugging-port=' + port
      console.info('remote-debugging-port@' + port)
    }
    shell.exec(execCommon)
  })
  .parse(process.argv)
